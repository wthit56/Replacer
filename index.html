<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        <script src=".js" type="text/javascript"></script>
		<script type="text/javascript">
  	console.group("var a = regexFind > stringReplace");
  	var a = Replacer(/a(?=(h))/g, "[a:$$|$&|$`|$'|$1]");
  	console.log("find: ", a.find);
  	console.log("replace: ", a.replace);
  	console.log("blahblah > " + a("blahblah"));
  	console.groupEnd();

  	console.group("var b = stringFind > stringReplace");
  	var b = Replacer("a", "[b:$$|$&|$`|$'|$1]");
  	console.log("find: ", b.find);
  	console.log("replace: ", b.replace);
  	console.log("blahblah > " + b("blahblah"));
  	console.groupEnd();

  	console.group("var c = regexFind > functionReplace");
  	var c = Replacer(/a/g, function (match) { return match.toUpperCase(); });
  	console.log("find: ", c.find);
  	console.log("replace: ", c.replace);
  	console.log("blahblah > " + c("blahblah"));
  	console.groupEnd();

  	console.group("var d = stringFind > functionReplace");
  	var d = Replacer("a", function (match) { return match.toUpperCase(); });
  	console.log("find: ", d.find);
  	console.log("replace: ", d.replace);
  	console.log("blahblah > " + d("blahblah"));
  	console.groupEnd();

  	console.group("var e = aggregate");
  	var e = Replacer.aggregate(
  	    { find: /a/, replace: "[e:$$|$`|$&|$']" },
  	    { find: /(h)/, replace: "[e2:$1]" },
  	    {
  	    	find: /b(l)/,
  	    	replace: function (match, l) { return match + "[e3:" + l.toUpperCase() + "]"; }
  	    }
  	).setFlags("gim");
  	console.log("find: ", e.find);
  	console.log("find base: ", e.find.base);
  	console.log("replace: ", e.replace.base);
  	console.log("setFlags: ", "gim");
  	console.log("blahblah > " + e("blahblah"));
  	console.groupEnd();

  	console.group("var f = nested aggregate");
  	var f = Replacer.aggregate(
  	    { find: /hb/g, replace: "[f:$&]" },
  	    e
  	);
  	console.log("find: ", f.find);
  	console.log("find base: ", f.find.base);
  	console.log("replace: ", f.replace.base);
  	console.log("blahblah > " + f("blahblah"));
  	console.groupEnd();

  	console.log("#1# |2|".replace(/([#\|])([\W\w]*?)\1/g, "[$1]<$2>"));

  	console.group("var g = aggregate + group-reference");
  	var g = Replacer.aggregate(
  	    { find: /\s*blah\s*/g, replace: "" },
  	    { find: /([#\|])([\W\w]*?)\1/g, replace: "[$1]<$2>" }
  	);
  	console.log("find: ", g.find);
  	console.log("find base: ", g.find.base);
  	console.log("replace: ", g.replace.base);
  	console.log("blah #1# |2| > " + g("blah #string# |string|"));
  	console.groupEnd();

  	console.group("failed groupIndex fix");
  	try {
  		Replacer.aggregate(
  	        { find: /()()()()()()()/g, replace: "" },
  	        { find: /([#\|])([\W\w]*?)\1/g, replace: "[$1]<$2>" }
  	    );
  	}
  	catch (error) {
  		console.error(error.message);
  	}
  	console.groupEnd();
		</script>
    </body>
</html>
